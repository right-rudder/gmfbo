---
import { getCollection } from "astro:content";
import ImageComp from "./ImageComp.astro";

const fullTeam = await getCollection("crew");

const sortedTeam = fullTeam.sort(
  (a, b) => (a.data.seniority ?? 0) - (b.data.seniority ?? 0),
);
---

<div id="meet-the-team" class="bg-white py-24 sm:py-32">
  <div class="mx-auto max-w-7xl px-6 lg:px-8">
    <div class="mx-auto max-w-2xl sm:text-center">
      <h2 class="title text-center text-crimson-600">Meet our leadership</h2>
      <p class="mt-4 text-lg/6 text-gray-600">
        Weâ€™re a dynamic group of individuals who are passionate about what we do
        and dedicated to delivering the best results for our clients.
      </p>
    </div>
    <ul
      role="list"
      class="mx-auto mt-14 grid max-w-2xl grid-cols-1 gap-x-6 gap-y-20 sm:grid-cols-2 lg:max-w-4xl lg:gap-x-8 xl:max-w-none"
    >
      {
        sortedTeam.map((member) => (
          <li class="flex flex-col gap-6 overflow-hidden rounded-tl-4xl rounded-br-4xl hover:rotate-z-1 hover:shadow-2xl xl:flex-row group hover:ring-1 ring-gray-200 hover:scale-105 transition-all duration-200 ease-out">
            <ImageComp
              src={
                member.data.image || "/src/assets/crew-placeholder-male.webp"
              }
              alt={member.data.name}
              class="aspect-square w-full md:aspect-4/5 md:w-52 flex-none object-cover outline-1 -outline-offset-1 outline-black/5"
            />
            <div class="flex-auto py-4">
              <h3 class="text-2xl font-bold tracking-tight text-gray-900">
                {member.data.name}
              </h3>
              <p class="text-base/7 font-medium text-gray-500">
                {member.data.title}
              </p>
              <p class="mt-4 text-base/7 text-gray-600 pr-4">{member.body}</p>
            </div>
          </li>
        ))
      }
    </ul>
  </div>
</div>
